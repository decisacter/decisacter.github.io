(window.webpackJsonp=window.webpackJsonp||[]).push([[96],{174:function(e,n,t){"use strict";t.r(n);var a=function(){var e=this.$createElement;this._self._c;return this._m(0)};a._withStripped=!0;var i=t(0),o=Object(i.a)({},a,[function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("section",[t("h1",[e._v("Output Management")]),e._v(" "),t("p",[e._v("So far we've manually included all our assets in our "),t("code",[e._v("index.html")]),e._v(" file, but as your application grows and once you start "),t("a",{attrs:{href:"/guides/caching"}},[e._v("using hashes in filenames")]),e._v(" and outputting "),t("a",{attrs:{href:"/guides/code-splitting"}},[e._v("multiple bundles")]),e._v(", it will be difficult to keep managing your "),t("code",[e._v("index.html")]),e._v(" file manually. However, a few plugins exist that will make this process much easier to manage.")]),e._v(" "),t("section",[t("h2",[e._v("Preparation")]),e._v(" "),t("p",[e._v("First, let's adjust our project a little bit:")]),e._v(" "),t("p",[t("b",[e._v("project")])]),e._v(" "),t("pre",[t("code",{staticClass:"my-diff"},[e._v("\n      webpack-demo\n      |- package.json\n      |- webpack.config.js\n      |- /dist\n      |- /src\n        |- index.js\n    +   |- print.js\n      |- /node_modules\n    ")])]),e._v(" "),t("p",[e._v("Let's add some logic to our "),t("code",[e._v("src/print.js")]),e._v(" file:")]),e._v(" "),t("p",[t("b",[e._v("src/print.js")])]),e._v(" "),t("pre",[t("code",{staticClass:"my-js"},[e._v("\n      export default function printMe() {\n        console.log('I get called from print.js!');\n      }\n    ")])]),e._v(" "),t("p",[e._v("And use that function in our "),t("code",[e._v("src/index.js")]),e._v(" file:")]),e._v(" "),t("p",[t("b",[e._v("src/index.js")])]),e._v(" "),t("pre",[t("code",{staticClass:"my-diff"},[e._v("\n      import _ from 'lodash';\n    + import printMe from './print.js';\n    \n      function component() {\n        const element = document.createElement('div');\n    +   const btn = document.createElement('button');\n    \n        element.innerHTML = _.join(['Hello', 'webpack'], ' ');\n    \n    +   btn.innerHTML = 'Click me and check the console!';\n    +   btn.onclick = printMe;\n    +\n    +   element.appendChild(btn);\n    \n        return element;\n      }\n    \n      document.body.appendChild(component());\n    ")])]),e._v(" "),t("p",[e._v("Let's also update our "),t("code",[e._v("dist/index.html")]),e._v(" file, in preparation for webpack to split out entries:")]),e._v(" "),t("p",[t("b",[e._v("dist/index.html")])]),e._v(" "),t("pre",[t("code",{staticClass:"my-diff"},[e._v('\n      <!doctype html>\n      <html>\n        <head>\n    -     <title>Asset Management</title>\n    +     <title>Output Management</title>\n    +     <script src="./print.bundle.js"><\/script>\n        </head>\n        <body>\n    -     <script src="./bundle.js"><\/script>\n    +     <script src="./app.bundle.js"><\/script>\n        </body>\n      </html>\n    ')])]),e._v(" "),t("p",[e._v("Now adjust the config. We'll be adding our "),t("code",[e._v("src/print.js")]),e._v(" as a new entry point ("),t("code",[e._v("print")]),e._v(") and we'll change the output as well, so that it will dynamically generate bundle names, based on the entry point names:")]),e._v(" "),t("p",[t("b",[e._v("webpack.config.js")])]),e._v(" "),t("pre",[t("code",{staticClass:"my-diff"},[e._v("\n      const path = require('path');\n    \n      module.exports = {\n    -   entry: './src/index.js',\n    +   entry: {\n    +     app: './src/index.js',\n    +     print: './src/print.js',\n    +   },\n        output: {\n    -     filename: 'bundle.js',\n    +     filename: '[name].bundle.js',\n          path: path.resolve(__dirname, 'dist'),\n        },\n      };\n    ")])]),e._v(" "),t("p",[e._v("Let's run "),t("code",[e._v("npm run build")]),e._v(" and see what this generates:")]),e._v(" "),t("pre",[t("code",{staticClass:"my-bash"},[e._v("\n      ...\n                Asset     Size  Chunks                    Chunk Names\n        app.bundle.js   545 kB    0, 1  [emitted]  [big]  app\n      print.bundle.js  2.74 kB       1  [emitted]         print\n      ...\n    ")])]),e._v(" "),t("p",[e._v("We can see that webpack generates our "),t("code",[e._v("print.bundle.js")]),e._v(" and "),t("code",[e._v("app.bundle.js")]),e._v(" files, which we also specified in our "),t("code",[e._v("index.html")]),e._v(" file. if you open "),t("code",[e._v("index.html")]),e._v(" in your browser, you can see what happens when you click the button.")]),e._v(" "),t("p",[e._v("But what would happen if we changed the name of one of our entry points, or even added a new one? The generated bundles would be renamed on a build, but our "),t("code",[e._v("index.html")]),e._v(" file would still reference the old names. Let's fix that with the "),t("a",{attrs:{href:"/plugins/html-webpack-plugin"}},[t("code",[e._v("HtmlWebpackPlugin")])]),e._v(".")])]),e._v(" "),t("section",[t("h2",[e._v("Setting up HtmlWebpackPlugin")]),e._v(" "),t("p",[e._v("First install the plugin and adjust the "),t("code",[e._v("webpack.config.js")]),e._v(" file:")]),e._v(" "),t("pre",[t("code",{staticClass:"my-bash"},[e._v("\n      npm install --save-dev html-webpack-plugin\n    ")])]),e._v(" "),t("p",[t("b",[e._v("webpack.config.js")])]),e._v(" "),t("pre",[t("code",{staticClass:"my-diff"},[e._v("\n      const path = require('path');\n    + const HtmlWebpackPlugin = require('html-webpack-plugin');\n    \n      module.exports = {\n        entry: {\n          app: './src/index.js',\n          print: './src/print.js',\n        },\n    +   plugins: [\n    +     new HtmlWebpackPlugin({\n    +       title: 'Output Management',\n    +     }),\n    +   ],\n        output: {\n          filename: '[name].bundle.js',\n          path: path.resolve(__dirname, 'dist'),\n        },\n      };\n    ")])]),e._v(" "),t("p",[e._v("Before we do a build, you should know that the "),t("code",[e._v("HtmlWebpackPlugin")]),e._v(" by default will generate its own "),t("code",[e._v("index.html")]),e._v(" file, even though we already have one in the "),t("code",[e._v("dist/")]),e._v(" folder. This means that it will replace our "),t("code",[e._v("index.html")]),e._v(" file with a newly generated one. Let's see what happens when we do an "),t("code",[e._v("npm run build")]),e._v(":")]),e._v(" "),t("pre",[t("code",{staticClass:"my-bash"},[e._v("\n      ...\n               Asset       Size  Chunks                    Chunk Names\n     print.bundle.js     544 kB       0  [emitted]  [big]  print\n       app.bundle.js    2.81 kB       1  [emitted]         app\n          index.html  249 bytes          [emitted]\n    ...\n    ")])]),e._v(" "),t("p",[e._v("If you open "),t("code",[e._v("index.html")]),e._v(" in your code editor, you'll see that the "),t("code",[e._v("HtmlWebpackPlugin")]),e._v(" has created an entirely new file for you and that all the bundles are automatically added.")]),e._v(" "),t("p",[e._v("If you want to learn more about all the features and options that the "),t("code",[e._v("HtmlWebpackPlugin")]),e._v(" provides, then you should read up on it on the "),t("a",{attrs:{href:"https://github.com/jantimon/html-webpack-plugin"}},[t("code",[e._v("HtmlWebpackPlugin")])]),e._v(" repo.")]),e._v(" "),t("p",[e._v("You can also take a look at "),t("a",{attrs:{href:"https://github.com/jaketrent/html-webpack-template"}},[t("code",[e._v("html-webpack-template")])]),e._v(" which provides a couple of extra features in addition to the default template.")])]),e._v(" "),t("section",[t("h2",[e._v("Cleaning up the "),t("code",[e._v("/dist")]),e._v(" folder")]),e._v(" "),t("p",[e._v("As you might have noticed over the past guides and code example, our "),t("code",[e._v("/dist")]),e._v(" folder has become quite cluttered. Webpack will generate the files and put them in the "),t("code",[e._v("/dist")]),e._v(" folder for you, but it doesn't keep track of which files are actually in use by your project.")]),e._v(" "),t("p",[e._v("In general it's good practice to clean the "),t("code",[e._v("/dist")]),e._v(" folder before each build, so that only used files will be generated. Let's take care of that.")]),e._v(" "),t("p",[e._v("A popular plugin to manage this is the "),t("a",{staticClass:"npm",attrs:{href:"package/clean-webpack-plugin"}},[t("code",[e._v("clean-webpack-plugin")])]),e._v(" so let's install and configure it.")]),e._v(" "),t("pre",[t("code",{staticClass:"my-bash"},[e._v("\n      npm install --save-dev clean-webpack-plugin\n    ")])]),e._v(" "),t("p",[t("b",[e._v("webpack.config.js")])]),e._v(" "),t("pre",[t("code",{staticClass:"my-diff"},[e._v("\n      const path = require('path');\n      const HtmlWebpackPlugin = require('html-webpack-plugin');\n    + const { CleanWebpackPlugin } = require('clean-webpack-plugin');\n    \n      module.exports = {\n        entry: {\n          app: './src/index.js',\n          print: './src/print.js',\n        },\n        plugins: [\n    +     new CleanWebpackPlugin(),\n          new HtmlWebpackPlugin({\n            title: 'Output Management',\n          }),\n        ],\n        output: {\n          filename: '[name].bundle.js',\n          path: path.resolve(__dirname, 'dist'),\n        },\n      };\n    ")])]),e._v(" "),t("p",[e._v("Now run an "),t("code",[e._v("npm run build")]),e._v(" and inspect the "),t("code",[e._v("/dist")]),e._v(" folder. If everything went well you should now only see the files generated from the build and no more old files!")])]),e._v(" "),t("section",[t("h2",[e._v("The Manifest")]),e._v(" "),t("p",[e._v("You might be wondering how webpack and its plugins seem to \"know\" what files are being generated. The answer is in the manifest that webpack keeps to track how all the modules map to the output bundles. If you're interested in managing webpack's "),t("a",{attrs:{href:"/configuration/output"}},[t("code",[e._v("output")])]),e._v(" in other ways, the manifest would be a good place to start.")]),e._v(" "),t("p",[e._v("The manifest data can be extracted into a json file for easy consumption using the "),t("a",{attrs:{href:"https://github.com/danethurber/webpack-manifest-plugin"}},[t("code",[e._v("WebpackManifestPlugin")])]),e._v(".")]),e._v(" "),t("p",[e._v("We won't go through a full example of how to use this plugin within your projects, but you can read up on "),t("a",{attrs:{href:"/concepts/manifest"}},[e._v("the concept page")]),e._v(" and the "),t("a",{attrs:{href:"/guides/caching"}},[e._v("caching guide")]),e._v(" to find out how this ties into long term caching.")])])])}],!1,null,null,null);o.options.__file="docs/web/webpack/guide/OutputManagement.vue";n.default=o.exports}}]);